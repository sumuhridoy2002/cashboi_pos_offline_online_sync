<!--
  Project      : Cashboi POS (Offline + Online Sync)
  Description  : This application allows users to make sales offline
                 using local storage / indexedDB. When internet
                 becomes available again, all pending invoices,
                 customers, and inventory updates get synced automatically
                 to the main online server.

  Key Features :
    ✔ Offline POS Sale Processing
    ✔ Auto Sync When Online
    ✔ Customer & Product Cache
    ✔ Background Queue System
    ✔ Fallback UI for No-Internet Scenarios

  Technology   : HTML, CSS, JavaScript, IndexedDB / LocalStorage,
                 REST API, CodeIgniter backend

  Author       : Ali Azgor Hridoy
  GitHub       : https://github.com/sumuhridoy2002
  Repository   : https://github.com/sumuhridoy2002/cashboi_pos_offline_online_sync
  Version      : 1.0.0
  License      : MIT

  Note         : Please keep author credits and GitHub link
                 if you reuse or redistribute this source code.
-->
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>POS Offline - CashBoi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./assets/dist/css/adminlte.min.css">
    <link rel="stylesheet" href="./assets/plugins/select2/css/select2.min.css">
    <script src="./assets/plugins/jquery/jquery.min.js"></script>
    <script src="./js/sweetalert2@11.js"></script>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body class="bg-light">
    
    <div id="syncOverlay">
        <div class="spinner-border text-light"></div>
        <h2 class="mt-3" id="syncText">Syncing...</h2>
    </div>

    <div id="printArea">
        <div style="text-align:center;">
            <h3>CASHBOI STORE</h3>
            <p id="pDate"></p>
        </div>
        <hr style="border-top: 1px dashed #000;">
        <p>Customer: <span id="pCustomer"></span></p>
        <table style="width:100%; text-align:left;">
            <thead><tr><th>Item</th><th>Qty</th><th style="text-align:right;">Total</th></tr></thead>
            <tbody id="pItems"></tbody>
        </table>
        <hr style="border-top: 1px dashed #000;">
        <div style="text-align:right;" id="pTotals"></div>
        <p style="text-align:center; margin-top:10px;">*** Thank You ***</p>
    </div>

    <div id="app" class="container-fluid mt-3" style="display:none;">
        <div class="pos-header">
            <div class="left">
                <span id="storeName">Store Name</span>
            </div>

            <div class="center">
                Cashboi Offline APP
            </div>

            <div class="right">
                <div id="dayName"></div>
                <div id="dateTime"></div>
            </div>
        </div>
        <div class="row mb-3 g-2">
            <div class="col">
                <button id="downloadMasterData" class="btn btn-success w-100 shadow-sm">
                    <i class="fa fa-download fa-lg"></i>
                    UPDATE DATA (ONLINE)
                </button>
            </div>

            <div class="col">
                <button id="stockBtn" class="btn btn-info w-100 shadow-sm">
                    <i class="fa fa-box"></i> Stock
                </button>
            </div>

            <div class="col">
                <button id="customerBtn" class="btn btn-info w-100 shadow-sm">
                    <i class="fa fa-users"></i> Customer
                </button>
            </div>

            <div class="col">
                <button id="salesBtn" class="btn btn-info w-100 shadow-sm">
                    <i class="fa fa-shopping-cart"></i> Sales
                </button>
            </div>

            <div class="col">
                <button id="expenseBtn" class="btn btn-info w-100 shadow-sm" disabled>
                    <i class="fa fa-wallet"></i> Expense
                </button>
            </div>

            <div class="col">
                <button id="syncSalesBtn" class="btn btn-warning w-100 shadow-sm" style="display:none;">
                    <i class="fa fa-sync"></i>
                    Synchronize <span id="pendingCount">0</span> Sales
                </button>
            </div>
        </div>

        <div class="card card-primary card-outline shadow">
            <div class="card-body">
                <form id="posForm">
                    <div class="row">
                        <div class="form-group col-md-4">
                            <label for="date">DATE*</label>
                            <input type="date" id="date" class="form-control" disabled>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="customerID">
                                CUSTOMER *
                            </label>
                            <select id="customerID" class="form-control select2" style="width: 100% !important;" required></select>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="productID">PRODUCTS *</label>
                            <select id="productID" class="form-control select2" style="width: 100% !important;"></select>
                        </div>
                    </div>

                    <div class="table-responsive mt-3">
                        <table class="table table-bordered text-center">
                            <thead class="bg-dark">
                                <tr><th>Item</th><th>Stock</th><th>Qty</th><th>Rate</th><th>Total</th><th>Action</th></tr>
                            </thead>
                            <tbody id="tbody"></tbody>
                        </table>
                    </div>

                    <div class="row mt-3 bg-white p-3 border rounded">
                        <div class="col-md-4"><label>Shipping (+)</label><input type="number" id="sCost" class="form-control calc-trigger" value="0"></div>
                        <div class="col-md-4"><label>VAT (%)</label><input type="number" id="vCost" class="form-control calc-trigger" value="0"></div>
                        <div class="col-md-4"><label>Discount (-)</label><input type="number" id="discount" class="form-control calc-trigger" value="0"></div>
                        <div class="col-md-4 mt-2"><label>GRAND TOTAL</label><input type="text" id="nAmount" class="form-control font-weight-bold" value="0.00" readonly></div>
                        <div class="col-md-4 mt-2"><label class="text-success">PAID</label><input type="number" id="totalprice" class="form-control calc-trigger" required></div>
                        <div class="col-md-4 mt-2"><label class="text-danger">DUE</label><input type="text" id="dAmount" class="form-control" value="0.00" readonly></div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-6"><label>MODE</label>
                            <select id="accountType" class="form-control">
                                <option value="Cash">Cash</option><option value="Bank">Bank</option><option value="Mobile">Mobile</option>
                            </select>
                        </div>
                        <div class="col-md-6"><label>ACCOUNT</label><select id="accountNo" class="form-control" required></select></div>
                    </div>
                    <button type="submit" class="btn btn-success btn-block btn-lg mt-4">৳ PAY & PRINT</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Reuseable Modal -->
    <div class="modal fade" id="dataModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered modal-xl modal-fullscreen-custom" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="dataModalTitle"></h5>
                <button type="button" class="close" data-dismiss="modal">
                    <span>&times;</span>
                </button>
            </div>

            <div class="modal-body p-2">
                <div class="table-responsive" style="height: calc(100vh - 120px); overflow:auto;">
                <table class="table table-bordered table-sm" id="dataTable">
                    <thead></thead>
                    <tbody></tbody>
                </table>
                </div>
            </div>
            </div>
        </div>
    </div>

    <script src="./assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/plugins/select2/js/select2.min.js"></script>
    <script src="./js/script.js"></script>
</body>
</html>